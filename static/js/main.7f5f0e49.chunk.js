(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(11),l=a.n(s),o=(a(71),a(9)),i=a(10),c=a(14),m=a(13),u=a(15),d=(a(44),a(56)),h=a.n(d),b=a(7),f=a(111),p=a(109),g=a(110),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={isFormValid:!1,showModal:!1,isLoggedIn:JSON.parse(localStorage.getItem("isLoggedIn"))||!1,user:JSON.parse(localStorage.getItem("user"))||{name:"unknown",email:"unknown"}},a.handleCancel=a.handleCancel.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a.handleShow=a.handleShow.bind(Object(b.a)(a)),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){"unknown"!==this.state.user.name&&this.props.dataService.setNewData(this.state.user)}},{key:"handleCancel",value:function(){this.setState({showModal:!1})}},{key:"handleSubmit",value:function(e){var t=this,a=e.currentTarget,n=this.formName,r=this.formEmail;!1===a.checkValidity()?(console.log("invalid form"),e.preventDefault(),e.stopPropagation(),this.setState({isFormValid:!0})):(console.log("set state"),this.setState({isFormValid:!0,isLoggedIn:!0,user:{name:n.value,email:r.value}},function(){t.props.dataService.setNewData(t.state.user),localStorage.setItem("user",JSON.stringify(t.state.user)),localStorage.setItem("isLoggedIn",JSON.stringify(!0))}))}},{key:"handleShow",value:function(){var e=this;this.state.isLoggedIn?this.setState({isLoggedIn:!1,user:{name:"unknown",email:"unknown"}},function(){e.props.dataService.setNewData(e.state.user),localStorage.setItem("user",JSON.stringify(e.state.user)),localStorage.setItem("isLoggedIn",JSON.stringify(!1))}):this.setState({showModal:!0},function(){l.a.findDOMNode(e.formName).focus()})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isFormValid,n=t.showModal,s=t.isLoggedIn;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{variant:"info",onClick:this.handleShow},s?"Logout":"Login"),r.a.createElement(p.a,{show:n,onHide:this.handleCancel},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,null,"What's your name?")),r.a.createElement(p.a.Body,null,r.a.createElement(g.a,{noValidate:!0,validated:a,onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(g.a.Group,{controlId:"formName"},r.a.createElement(g.a.Control,{required:!0,type:"text",placeholder:"Name",ref:function(t){e.formName=t}})),r.a.createElement(g.a.Group,{controlId:"formEmail"},r.a.createElement(g.a.Control,{required:!0,type:"email",placeholder:"Email",ref:function(t){e.formEmail=t}})),r.a.createElement(f.a,{type:"submit"},"Save")))))}}]),t}(r.a.Component),O=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:h.a,alt:"logo",height:"120px"}),r.a.createElement("h1",null,"friends")),r.a.createElement("div",{className:"hello_user"},r.a.createElement("span",null,"Hello ",this.props.name,"!"),r.a.createElement("br",null),r.a.createElement(v,{dataService:this.props.dataService})))}}]),t}(r.a.Component),S=a(34),k=a(31),E=a(17),N=function(){function e(){Object(o.a)(this,e),this.observers=[]}return Object(i.a)(e,[{key:"setNewData",value:function(e){console.log("newData: "),console.log(e),this.observers.forEach(function(t){return t(e)})}},{key:"addObserver",value:function(e){this.observers.push(e)}}]),e}(),y=new N,C=N,j=a(112),x=a(106),w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).onUserNameDefined=function(e){a.setState({user:e})},a.state={user:JSON.parse(localStorage.getItem("user"))||{name:"unknown",email:"unknown"},likes:JSON.parse(localStorage.getItem(a.getStorageName()))||{likesCounter:0,likesArr:[],currentUserLike:!1}},y.addObserver(a.onUserNameDefined),a.likeHandler=a.likeHandler.bind(Object(b.a)(a)),a.getStorageName=a.getStorageName.bind(Object(b.a)(a)),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getStorageName",value:function(){return"like_panel-"+this.props.id}},{key:"likeHandler",value:function(){var e=this,t=function(){localStorage.setItem(e.getStorageName(),JSON.stringify(e.state.likes))},a=this.state.user.email,n=this.state.likes.likesArr;if("unknown"!==a)if(n.includes(a)){var r=n.findIndex(function(e){return e===a});n.splice(r,1),this.setState(function(e){return{likes:Object.assign(e.likes,{likesArr:n,likesCounter:n.length})}},t)}else n.push(a),this.setState(function(e){return{likes:Object.assign(e.likes,{likesArr:n,likesCounter:n.length})}},t)}},{key:"render",value:function(){var e=null;return e="unknown"===this.state.user.email?r.a.createElement(j.a,{overlay:r.a.createElement(x.a,{id:"tooltip-disabled"},"Please login")},r.a.createElement("span",{className:""},r.a.createElement(f.a,{disabled:!0,style:{pointerEvents:"none"},className:"comment_button btn-left"},r.a.createElement(E.a,{icon:k.b}),r.a.createElement("span",null,this.state.likes.likesCounter)))):r.a.createElement("button",{className:"comment_button btn-left",name:"like",value:this.state.likes.likesCounter,onClick:this.likeHandler},r.a.createElement(E.a,{icon:k.b}),r.a.createElement("span",null,this.state.likes.likesCounter)),r.a.createElement("div",null,e)}}]),t}(r.a.Component),V=a(33),D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).onUserNameDefined=function(e){a.setState({user:e})},a.applyComment=function(e){var t=a.state.commentValue;13===e.keyCode&&!1===e.shiftKey&&a.setState({editing:!1},function(){a.props.commentDataObserver.setNewData({id:a.props.id,updatedValue:t})})},a.state={editing:!1,commentValue:a.props.textValue,user:JSON.parse(localStorage.getItem("user"))||{name:"unknown",email:"unknown"}},a.renderNormal=a.renderNormal.bind(Object(b.a)(a)),a.renderTxtArea=a.renderTxtArea.bind(Object(b.a)(a)),a.editComment=a.editComment.bind(Object(b.a)(a)),a.applyComment=a.applyComment.bind(Object(b.a)(a)),a.textareaHandle=a.textareaHandle.bind(Object(b.a)(a)),y.addObserver(a.onUserNameDefined),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"textareaHandle",value:function(e){this.setState({commentValue:e.target.value})}},{key:"editComment",value:function(){this.setState({editing:!0})}},{key:"renderNormal",value:function(){return r.a.createElement("span",null," ",this.state.commentValue," ")}},{key:"renderTxtArea",value:function(){return r.a.createElement("span",null,r.a.createElement("textarea",{rows:"1",className:"comment_edit",onKeyDown:this.applyComment,value:this.state.commentValue,onChange:this.textareaHandle}))}},{key:"render",value:function(){var e,t,a=this.props,n=a.name,s=a.email;return"unknown"!==s&&this.state.user.email===s&&(e=r.a.createElement(E.a,{className:"dots",icon:V.faEllipsisH,onClick:this.editComment})),t=this.state.editing?this.renderTxtArea():this.renderNormal(),r.a.createElement("div",{className:"comment_added"},r.a.createElement("p",{className:""},n,": ",t," ",e," "))}}]),t}(r.a.Component),I=a(107),A=a(108),H=a(61),J=a(27),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).storageCallback=function(){return localStorage.setItem(a.getStorageName(),JSON.stringify(a.state))},a.onCommentEdition=function(e){var t=a.state.commentsArr,n=t.map(function(e){return e.id}).indexOf(e.id),r=Object.assign(t[n],{textValue:e.updatedValue});t[n]=r,a.setState({commentsArr:t},a.storageCallback)},a.onUserNameDefined=function(e){"unknown"===e.name&&a.setState({displayComments:!1},a.storageCallback)},a.textareaHandle=function(e){a.setState({textareaValue:e.target.value})},a.addNewComment=function(e){if(13===e.keyCode&&!1===e.shiftKey&&(e.preventDefault(),a.state.textareaValue.trim().length>0)){var t={id:a.state.commentsArr.length+1,name:a.props.name,email:a.props.email,textValue:a.state.textareaValue};a.setState(function(e){return{commentsArr:[t].concat(Object(S.a)(e.commentsArr)),textareaValue:"",commentsCounter:a.state.commentsArr.length+1}},a.storageCallback)}},a.state=JSON.parse(localStorage.getItem(a.getStorageName()))||{commentsArr:[],commentsCounter:0,displayComments:!1,textareaValue:""},a.displayComments=a.displayComments.bind(Object(b.a)(a)),a.addNewComment=a.addNewComment.bind(Object(b.a)(a)),a.getStorageName=a.getStorageName.bind(Object(b.a)(a)),a.textareaHandle=a.textareaHandle.bind(Object(b.a)(a)),a.storageCallback=a.storageCallback.bind(Object(b.a)(a)),y.addObserver(a.onUserNameDefined),a.commentDataObserver=new C,a.commentDataObserver.addObserver(a.onCommentEdition),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getStorageName",value:function(){return"comment_panel-"+this.props.id}},{key:"displayComments",value:function(){this.setState(function(e){return{displayComments:!e.displayComments}},this.storageCallback)}},{key:"render",value:function(){var e=this,t=this.props.id,a=null;a=this.state.displayComments?J.b:J.a;var n=null;return this.state.displayComments&&(n=r.a.createElement("div",null,r.a.createElement("textarea",{rows:"1",cols:"30",className:"comment_create",placeholder:"Write a comment...",onKeyDown:this.addNewComment,value:this.state.textareaValue,onChange:this.textareaHandle}),r.a.createElement("div",{className:"comment_list"},this.state.commentsArr.map(function(t){return r.a.createElement(D,{key:t.id,id:t.id,name:t.name,email:t.email,textValue:t.textValue,commentDataObserver:e.commentDataObserver,storageName:e.getStorageName()})})))),r.a.createElement(I.a,{className:"comment-container"},r.a.createElement(A.a,null,r.a.createElement(H.a,null,r.a.createElement(w,{id:t})),r.a.createElement(H.a,null,r.a.createElement("button",{className:"comment_button btn-right",name:"comment",value:this.state.commentsCounter,onClick:this.displayComments},r.a.createElement(E.a,{icon:k.a}),r.a.createElement("span",null,this.state.commentsCounter),r.a.createElement(E.a,{icon:a})))),r.a.createElement(A.a,null,r.a.createElement(H.a,null,n)))}}]),t}(r.a.Component),L=a(65),U=a.n(L),T=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).onUserNameDefined=function(e){a.setState({user:e})},a.applyStatus=function(e){if(13===e.keyCode&&!1===e.shiftKey){var t=a.state.statusArr,n=t.map(function(e){return e.id}).indexOf(a.props.id),r=a.state.textareaValue,s=Object.assign(t[n],{txtValue:r});t[n]=s,a.setState({editing:!1,statusArr:t},function(){localStorage.setItem("statuses",JSON.stringify(a.state.statusArr))})}},a.state={editing:!1,textareaValue:a.props.txtValue,user:JSON.parse(localStorage.getItem("user"))||{name:"unknown",email:"unknown"},statusArr:JSON.parse(localStorage.getItem("statuses"))},a.editStatus=a.editStatus.bind(Object(b.a)(a)),a.applyStatus=a.applyStatus.bind(Object(b.a)(a)),a.renderTextarea=a.renderTextarea.bind(Object(b.a)(a)),a.renderNormal=a.renderNormal.bind(Object(b.a)(a)),a.textareaHandle=a.textareaHandle.bind(Object(b.a)(a)),y.addObserver(a.onUserNameDefined),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"textareaHandle",value:function(e){this.setState({textareaValue:e.target.value})}},{key:"editStatus",value:function(){this.setState({editing:!0})}},{key:"renderTextarea",value:function(){return r.a.createElement("div",null,r.a.createElement("textarea",{className:"comment_create",onKeyDown:this.applyStatus,value:this.state.textareaValue,onChange:this.textareaHandle}))}},{key:"renderNormal",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"status_content"},this.state.textareaValue))}},{key:"render",value:function(){var e,t,a,n=this.props,s=n.date,l=n.name,o=n.email,i=n.id,c=n.color;return e="unknown"!==l?J.c:J.d,o===this.state.user.email&&"unknown"!==this.state.user.email&&(t=r.a.createElement(E.a,{className:"dots",icon:V.faEllipsisH,onClick:this.editStatus})),a=this.state.editing?this.renderTextarea():this.renderNormal(),r.a.createElement("div",{className:"status_added"},r.a.createElement("div",{className:"author"},r.a.createElement(E.a,{className:"faUserIcon",style:{color:c},icon:e}),r.a.createElement("p",{className:"author_name"},l),r.a.createElement("small",{className:"status_data"},r.a.createElement(U.a,{fromNow:!0},s)),t),a,r.a.createElement(_,{id:i,name:this.state.user.name,email:this.state.user.email}))}}]),t}(r.a.Component),M="statuses",F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).chooseColor=function(){var e=["#E84291","#F7AC13","#2192A6","#191E44","#123E92"];return e[Math.floor(Math.random()*e.length)]},a.sendStatus=function(){var e={id:a.state.statusArr.length,txtValue:a.state.textareaValue,date:new Date,name:a.props.name,email:a.props.email,color:a.chooseColor()};e.txtValue.trim().length>0?a.setState(function(t){return{statusArr:[e].concat(Object(S.a)(t.statusArr)),letters:0,textareaValue:""}},function(){localStorage.setItem(M,JSON.stringify(a.state.statusArr))}):a.setState({textareaValue:""})},a.state={statusArr:JSON.parse(localStorage.getItem(M))||[{id:0,txtValue:"Hi, maybe some movie today's evening?",date:new Date,name:"Ola",email:"",color:a.chooseColor()}],letters:0,textareaValue:""},a.sendStatus=a.sendStatus.bind(Object(b.a)(a)),a.textareaHandle=a.textareaHandle.bind(Object(b.a)(a)),a.chooseColor=a.chooseColor.bind(Object(b.a)(a)),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"textareaHandle",value:function(e){this.setState({letters:e.target.value.length,textareaValue:e.target.value})}},{key:"render",value:function(){var e=this.props.maxLetters;return r.a.createElement("div",null,r.a.createElement("div",{id:"status_create"},r.a.createElement("p",null,"What do you want to share?"),r.a.createElement("textarea",{rows:"2",cols:"70",placeholder:"Write something...",onChange:this.textareaHandle,name:"message",maxLength:e,value:this.state.textareaValue}),r.a.createElement("small",null,this.props.maxLetters-this.state.letters," characters"),r.a.createElement("button",{id:"send",onClick:this.sendStatus},"Send")),r.a.createElement("br",null),r.a.createElement("div",{id:"status_container"},this.state.statusArr.map(function(e){return r.a.createElement(T,{key:e.id,id:e.id,txtValue:e.txtValue,date:e.date,name:e.name,email:e.email,color:e.color})})))}}]),t}(r.a.Component),K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).onUserNameDefined=function(e){a.setState({user:e})},a.state={user:{name:"unknown",email:"unknown"}},y.addObserver(a.onUserNameDefined),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(O,{dataService:y,name:this.state.user.name}),r.a.createElement("div",{className:"body-container"},r.a.createElement(F,{maxLetters:300,name:this.state.user.name,email:this.state.user.email}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},44:function(e,t,a){},56:function(e,t,a){e.exports=a.p+"static/media/logo.8a5da5cb.png"},66:function(e,t,a){e.exports=a(104)},71:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.7f5f0e49.chunk.js.map